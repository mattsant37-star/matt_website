<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üéÇ Happy Birthday ‚Äì Interactive</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --brand1: #ff8a00;
      --brand2: #ff2d55;
      --brand3: #7c4dff;
      --brand4: #00c2ff;
      --btn-bg: #ffffff;
      --text: #fff;     
    }* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fbc2eb, #a6c1ee);
  background-size: 300% 300%;
  animation: bgShift 18s ease infinite;
  overflow: hidden;
}
@keyframes bgShift { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

/* Fireworks Canvas */
#fx { position: fixed; inset: 0; z-index: 0; pointer-events: none; }

/* Center stage card */
.stage {
  position: relative;
  z-index: 1;
  width: min(920px, 92vw);
  margin: 0 auto;
  padding: clamp(18px, 3vw, 28px);
  border-radius: 28px;
  background: rgba(255,255,255,0.08);
  backdrop-filter: blur(8px);
  box-shadow: 0 20px 60px rgba(0,0,0,0.25);
  display: grid; place-items: center;
  min-height: min(78vh, 760px);
}

.hidden { display: none !important; }

/* Holographic 3D Heading */
.holo3d {
  font-family: 'Pacifico', cursive;
  font-size: clamp(40px, 6vw, 68px);
  letter-spacing: 1px;
  line-height: 1.05;
  background: conic-gradient(from 120deg, #fff 0%, #ffe066 10%, #ff79c6 30%, #9df 50%, #baffc9 70%, #ffd1dc 85%, #fff 100%);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
  text-shadow:
    0 1px 0 rgba(0,0,0,0.08),
    0 2px 0 rgba(0,0,0,0.08),
    0 3px 0 rgba(0,0,0,0.08),
    0 6px 14px rgba(0,0,0,0.35),
    0 0 30px rgba(255,255,255,0.35);
  animation: shimmer 4.5s linear infinite;
}
@keyframes shimmer { to { filter: hue-rotate(360deg); } }

.lead { opacity: 0.9; margin: 8px 0 14px; }

/* Inputs & Fancy Buttons */
.field {
  width: min(420px, 90%);
  display: flex; gap: 10px; justify-content: center; margin-top: 10px;
}
.input {
  flex: 1; padding: 12px 16px; border-radius: 999px; border: none; outline: none;
  font-size: 16px; text-align: center; box-shadow: inset 0 0 0 2px rgba(255,255,255,0.35);
  background: rgba(255,255,255,0.9); color: #333;
}
.btn {
  --glow: 0 10px 25px rgba(255,255,255,0.45), 0 0 50px rgba(255,255,255,0.25);
  padding: 12px 18px; border-radius: 999px; border: none; cursor: pointer; font-weight: 700;
  background: radial-gradient(circle at 30% 30%, #fff, #ffe9b5);
  color: #333; box-shadow: var(--glow);
  transition: transform .18s ease, box-shadow .18s ease;
  display: inline-flex; align-items: center; gap: 10px; font-size: 15px;
}
.btn:hover { transform: translateY(-2px) scale(1.03); box-shadow: 0 14px 32px rgba(255,255,255,0.55); }
.btn:active { transform: translateY(0) scale(0.98); }

.btn-cta {
  background: linear-gradient(135deg, var(--brand1), var(--brand2), var(--brand3));
  color: #fff; box-shadow: 0 10px 30px rgba(255, 69, 150, 0.5);
}

/* Step wrappers */
.step { width: 100%; display: grid; place-items: center; text-align: center; }
.fadeIn { animation: fadeIn .6s ease both; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(8px) scale(.98);} to { opacity: 1; transform: translateY(0) scale(1);} }

/* Balloon Game */
#gameArea { position: relative; width: 100%; height: 58vh; max-height: 520px; overflow: hidden; }
.balloon {
  position: absolute; width: clamp(70px, 12vw, 110px); height: clamp(96px, 16vw, 160px);
  border-radius: 50% 50% 46% 46%;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.9), rgba(255,255,255,.2) 40%),
              linear-gradient(145deg, var(--b1), var(--b2));
  box-shadow: inset -8px -12px 18px rgba(0,0,0,0.12), 0 16px 28px rgba(0,0,0,.18);
  animation: sway 3.2s ease-in-out infinite;
  display: grid; place-items: center; color: #fff; font-weight: 700; text-shadow: 0 2px 6px rgba(0,0,0,.35);
  cursor: pointer; user-select: none;
}
.balloon::after { /* string */
  content: ""; position: absolute; bottom: -28px; left: 50%; width: 2px; height: 34px; transform: translateX(-50%);
  background: rgba(255,255,255,.7);
}
@keyframes sway { 0%,100% { transform: translateY(0) rotate(-2deg);} 50% { transform: translateY(-12px) rotate(2deg);} }
.pop { animation: pop .35s ease forwards; }
@keyframes pop { 0% { transform: scale(1); opacity:1 } 60% { transform: scale(1.25); opacity:.8 } 100% { transform: scale(0); opacity:0 } }

/* Random cat GIF badge */
.gif-badge { position: absolute; right: 12px; bottom: 12px; width: clamp(66px, 14vw, 100px); filter: drop-shadow(0 8px 16px rgba(0,0,0,.35)); opacity: 0; animation: badgeIn .5s ease forwards; }
@keyframes badgeIn { from { transform: translateY(12px) scale(.9); opacity:0 } to { transform: translateY(0) scale(1); opacity:1 } }

/* Typing area */
#typing { font-size: clamp(16px, 2.4vw, 20px); max-width: 760px; line-height: 1.65; text-align: left; }
.cursor { display:inline-block; width: 10px; background: #fff; margin-left: 2px; animation: blink 1s steps(2) infinite; }
@keyframes blink { 50% { opacity: 0; } }

/* Confetti during video */
.confetti { position: fixed; top: -10px; width: 8px; height: 14px; opacity: .9; z-index: 2; pointer-events: none; }

/* Floating side balloons during video */
.floaty { position: fixed; bottom: -120px; width: 60px; height: 90px; border-radius: 50%; z-index: 2; opacity:.85; animation: floatUp 10s linear infinite; }
@keyframes floatUp { to { transform: translateY(-120vh);} }

/* Responsive iframe wrapper */
.videoWrap { position: relative; width: min(920px, 92vw); aspect-ratio: 16/9; border-radius: 16px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,.35); }
.videoWrap iframe, .videoWrap video { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; }

  </style>
</head>
<body>
  <canvas id="fx"></canvas>  <main class="stage">
    <!-- STEP 1: Welcome -->
    <section id="step1" class="step fadeIn">
      <h1 class="holo3d">Happy Birthday! ‚ú®</h1>
      <p class="lead">Masukkan namamu dulu ya, biar ucapannya makin personal üíñ</p>
      <div class="field">
        <input id="name" class="input" placeholder="Nama kamu‚Ä¶ (biarkan kosong = to you)" />
        <button id="go1" class="btn btn-cta">Mulai üéâ</button>
      </div>
    </section><!-- STEP 2: Balloon Game -->
<section id="step2" class="step hidden">
  <h2 class="holo3d" style="font-size: clamp(28px,4.5vw,44px);">Pecahin 5 balon dulu yuk üéà</h2>
  <p class="lead">Klik balonnya sampai meletus. Setiap pop ada kucing chibi lucu muncul üê±</p>
  <div id="gameArea"></div>
  <img id="gifBadge" class="gif-badge hidden" alt="cat gif" />
  <button id="skipGame" class="btn" title="Kalau susah, bisa lompat üòÄ">Lewati Game ‚ûú</button>
</section>

<!-- STEP 3: Wishes (typing) -->
<section id="step3" class="step hidden">
  <h2 class="holo3d" id="headline3"></h2>
  <div id="typing" class="fadeIn"></div>
  <button id="toVideo" class="btn btn-cta hidden">Lanjut ke Video üé•</button>
</section>

<!-- STEP 4: Video + ambient animations -->
<section id="step4" class="step hidden">
  <h2 class="holo3d" style="font-size: clamp(28px,4.5vw,44px);">Kado Kecil Untukmu üéÅ</h2>
  <div class="videoWrap fadeIn" id="videoWrap">
    <!-- Prefer Google Drive preview iframe (stable on mobile) -->
    <iframe id="gdrive" allow="autoplay; clipboard-write; encrypted-media" referrerpolicy="no-referrer" src="https://drive.google.com/file/d/1OgarTCvqRh6g3hdgxEkmd2dubOMpwLig/preview"></iframe>
    <!-- Fallback HTML5 video (will show only if iframe blocked)
    <video id="fallbackVid" controls playsinline webkit-playsinline class="hidden">
      <source src="https://drive.google.com/uc?export=download&id=1OgarTCvqRh6g3hdgxEkmd2dubOMpwLig" type="video/mp4" />
    </video> -->
  </div>
</section>

  </main>  <script>
    // ---------- Utilities ----------
    const $ = (q) => document.querySelector(q);
    const $$ = (q) => document.querySelectorAll(q);

    // Random helpers
    const rand = (min, max) => Math.random() * (max - min) + min;
    const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];

    // ---------- Fireworks (simple particles) ----------
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');
    let W, H; function resize(){ W = canvas.width = innerWidth; H = canvas.height = innerHeight; } resize(); addEventListener('resize', resize);

    let sparks = [];
    function boom(x, y, hue) {
      for (let i=0; i<70; i++) {
        const angle = Math.random() * Math.PI * 2;
        const speed = rand(1, 5);
        sparks.push({ x, y, vx: Math.cos(angle)*speed, vy: Math.sin(angle)*speed, life: rand(40,80), hue });
      }
    }
    function tickFX(){
      ctx.clearRect(0,0,W,H);
      for (let i=sparks.length-1; i>=0; i--) {
        const p = sparks[i];
        p.life--; p.x += p.vx; p.y += p.vy; p.vy += 0.02; // gravity
        ctx.fillStyle = `hsl(${p.hue}, 100%, 60%)`;
        ctx.globalAlpha = Math.max(p.life/80, 0);
        ctx.fillRect(p.x, p.y, 2, 2);
        if (p.life <= 0) sparks.splice(i,1);
      }
      requestAnimationFrame(tickFX);
    }
    tickFX();

    // Little idle fireworks every few seconds
    setInterval(()=> boom(rand(80, W-80), rand(80, H-180), Math.floor(rand(0,360))), 2400);

    // ---------- Step 1 ‚Üí Step 2 ----------
    let userName = 'to you';
    $('#go1').addEventListener('click', () => {
      const val = $('#name').value.trim();
      if (val) userName = val;
      $('#step1').classList.add('hidden');
      $('#step2').classList.remove('hidden');
      startGame();
    });

    // ---------- Balloon Game ----------
    const gameArea = document.getElementById('gameArea');
    const gifBadge = document.getElementById('gifBadge');
    const catGifs = [
      'https://media.tenor.com/-g5zT6lGd0sAAAAC/cat-dance.gif',
      'https://media.tenor.com/Df8cAaLXjUoAAAAC/party-cat.gif',
      'https://media.tenor.com/j3zcC3p9iTQAAAAC/cat-cute.gif',
      'https://media.tenor.com/f8eZt8HIOqMAAAAC/cat-dancing.gif',
      'https://media.tenor.com/dXn0qX0s5K0AAAAC/cute-cat-kitty.gif'
    ];

    let popped = 0; let balloons = [];

    function createBalloon() {
      const b = document.createElement('div');
      b.className = 'balloon';
      // random color
      b.style.setProperty('--b1', `hsl(${Math.floor(rand(0,360))}, 95%, 65%)`);
      b.style.setProperty('--b2', `hsl(${Math.floor(rand(0,360))}, 85%, 55%)`);
      b.style.left = rand(10, gameArea.clientWidth - 110) + 'px';
      b.style.top  = rand(40, gameArea.clientHeight - 160) + 'px';
      b.textContent = 'üéà';
      b.addEventListener('click', () => popBalloon(b));
      gameArea.appendChild(b); balloons.push(b);
    }

    function popBalloon(b){
      if (b.classList.contains('pop')) return;
      popped++; b.classList.add('pop');
      // Show random GIF badge
      const url = pick(catGifs);
      gifBadge.src = url; gifBadge.classList.remove('hidden');
      gifBadge.style.right = Math.floor(rand(8, 24)) + 'px';
      gifBadge.style.bottom = Math.floor(rand(8, 24)) + 'px';
      setTimeout(()=> gifBadge.classList.add('hidden'), 1800);

      setTimeout(()=> { b.remove(); balloons = balloons.filter(x=>x!==b); }, 340);

      if (popped >= 5) {
        setTimeout(()=> { // transition
          $('#step2').classList.add('hidden');
          startTyping();
          $('#step3').classList.remove('hidden');
        }, 400);
      } else {
        // ensure there are always ~6 balloons visible
        if (balloons.length < 6) createBalloon();
      }
    }

    function startGame(){
      popped = 0; balloons.forEach(b=>b.remove()); balloons = [];
      gameArea.innerHTML = '';
      for (let i=0;i<6;i++) createBalloon();
    }

    // Allow skipping game
    $('#skipGame').addEventListener('click', ()=>{
      $('#step2').classList.add('hidden');
      startTyping();
      $('#step3').classList.remove('hidden');
    });

    // ---------- Typing Wishes ----------
    const lines = () => [
      `Hai ${userName} üéâ`,
      `Selamat ulang tahun! Semoga hari ini jadi awal yang baik untuk hal-hal seru yang lagi kamu kejar.`,
      `Semoga sehat selalu, rezeki lancar, dan hati kamu dijaga tetap hangat oleh orang-orang yang sayang sama kamu.`,
      `Terima kasih sudah jadi versi kamu yang tulus dan bikin sekitar jadi lebih cerah. Happy leveling up! ‚ú®`
    ];

    function typeLine(el, text, i=0, speed=22) {
      return new Promise(res=>{
        const iv = setInterval(()=>{
          el.innerHTML = text.slice(0, i++) + '<span class="cursor">&nbsp;</span>';
          if (i>text.length) { clearInterval(iv); el.innerHTML = text; res(); }
        }, speed);
      });
    }

    async function startTyping(){
      $('#headline3').textContent = `Happy Birthday, ${userName}!`;
      const box = $('#typing'); box.innerHTML = '';
      for (const ln of lines()) {
        const p = document.createElement('p'); box.appendChild(p);
        // slightly slower for the first line
        await typeLine(p, ln, 0, ln.includes('Hai') ? 28 : 20);
        await new Promise(r=>setTimeout(r, 220));
      }
      $('#toVideo').classList.remove('hidden');
    }

    $('#toVideo').addEventListener('click', ()=>{
      $('#step3').classList.add('hidden');
      $('#step4').classList.remove('hidden');
      startCelebration();
    });

    // ---------- Celebration during video ----------
    function startCelebration(){
      // Confetti rain
      for (let i=0; i<80; i++) dropConfetti();
      // Side balloons
      for (let i=0; i<6; i++) floatBalloon();
      // Launch a couple fireworks for emphasis
      boom(innerWidth*0.2, innerHeight*0.82, 320);
      boom(innerWidth*0.8, innerHeight*0.78, 40);

      // Fallback: if iframe blocked, show <video>
      const iframe = document.getElementById('gdrive');
      iframe.addEventListener('error', () => {
        // If the iframe errors, swap to fallback video element
        // const v = document.getElementById('fallbackVid');
        // v.classList.remove('hidden');
        // iframe.remove();
      }, { once: true });
    }

    function dropConfetti(){
      const c = document.createElement('div');
      c.className = 'confetti';
      c.style.left = rand(0, innerWidth) + 'px';
      c.style.background = `hsl(${Math.floor(rand(0,360))}, 95%, 55%)`;
      c.style.transform = `rotate(${Math.floor(rand(0,360))}deg)`;
      document.body.appendChild(c);
      const duration = rand(3.5, 6);
      c.animate([
        { transform: `translateY(0) rotate(0deg)` },
        { transform: `translateY(${innerHeight+40}px) rotate(${Math.floor(rand(90,360))}deg)` }
      ], { duration: duration*1000, easing: 'linear' });
      setTimeout(()=> c.remove(), duration*1000 + 50);
    }

    function floatBalloon(){
      const b = document.createElement('div');
      b.className = 'floaty';
      b.style.left = rand(0, innerWidth-60) + 'px';
      b.style.background = `radial-gradient(circle at 30% 30%, rgba(255,255,255,.9), rgba(255,255,255,.25) 40%), linear-gradient(145deg, hsl(${Math.floor(rand(0,360))},90%,65%), hsl(${Math.floor(rand(0,360))},80%,55%))`;
      document.body.appendChild(b);
      setTimeout(()=> b.remove(), 10000);
    }
  </script></body>
</html>